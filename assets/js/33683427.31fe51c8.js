"use strict";(self.webpackChunkoi_web=self.webpackChunkoi_web||[]).push([[279],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[d]="string"==typeof e?e:o,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8523:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var r=n(7462),o=(n(7294),n(3905));const a={title:"Function Arguments"},i="Introspecting Function Arguments",c={unversionedId:"addrbook-funcargs",id:"addrbook-funcargs",title:"Function Arguments",description:"We'll now look at a simple example of introspecting objects upon entry to a function. Adding a contact to the address book takes 3 string objects passed by reference:",source:"@site/docs/addrbook-funcargs.md",sourceDirName:".",slug:"/addrbook-funcargs",permalink:"/docs/addrbook-funcargs",draft:!1,editUrl:"https://github.com/facebookexperimental/object-introspection/docs/addrbook-funcargs.md",tags:[],version:"current",frontMatter:{title:"Function Arguments"},sidebar:"mysidebar",previous:{title:"this pointers",permalink:"/docs/addrbook-this"},next:{title:"Limitations and Constraints",permalink:"/docs/constraints"}},s={},l=[],p={toc:l},d="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"introspecting-function-arguments"},"Introspecting Function Arguments"),(0,o.kt)("p",null,"We'll now look at a simple example of introspecting objects upon entry to a function. Adding a contact to the address book takes 3 string objects passed by reference:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  void AddContact(std::string& f, std::string& l, std::string& n);\n")),(0,o.kt)("p",null,"We need the symbol name to form the probe specification:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ ~/object-introspection/examples/web/AddrBook# readelf -sW addrbook | grep AddContext\n    76: 0000000000401980   221 FUNC    WEAK   DEFAULT   15 _ZN11AddressBook10AddContactERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES6_S6_\n")),(0,o.kt)("p",null,"So the probe specification for introspecting the first and third argument (FirstName and Number) passed to ",(0,o.kt)("inlineCode",{parentName:"p"},"AddContact()")," is:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ ~/object-introspection/examples/web/AddrBook# cat /tmp/addrentry.oid\nentry:_ZN11AddressBook10AddContactERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES6_S6_:arg0,arg2\n")),(0,o.kt)("p",null,"A few small things to note:"),(0,o.kt)("ul",null,(0,o.kt)("li",null,"Instead of specifying the probe on the command line with the `-S` option we've put it into a file as longer probe specifications become a bit unwieldy in the command line for some of us!"),(0,o.kt)("li",null,"Arguments to functions are referenced by `argX` where `X` begins at 0 for the first argument."),(0,o.kt)("li",null,"One or more arguments can be specified in the probe specification.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ ~/object-introspection# jq . oid_out.json\n[\n  {\n    "name": "f",\n    "typePath": "f",\n    "typeName": "string",\n    "isTypedef": true,\n    "staticSize": 32,\n    "dynamicSize": 0,\n    "members": [\n      {\n        "name": "",\n        "typePath": "",\n        "typeName": "basic_string<char, std::char_traits<char>, std::allocator<char> >",\n        "isTypedef": false,\n        "staticSize": 32,\n        "dynamicSize": 0,\n        "length": 14,\n        "capacity": 15,\n        "elementStaticSize": 1\n      }\n    ]\n  },\n  {\n    "name": "n",\n    "typePath": "n",\n    "typeName": "string",\n    "isTypedef": true,\n    "staticSize": 32,\n    "dynamicSize": 23,\n    "members": [\n      {\n        "name": "",\n        "typePath": "",\n        "typeName": "basic_string<char, std::char_traits<char>, std::allocator<char> >",\n        "isTypedef": false,\n        "staticSize": 32,\n        "dynamicSize": 23,\n        "length": 23,\n        "capacity": 23,\n        "elementStaticSize": 1\n      }\n    ]\n  }\n]\n')),(0,o.kt)("p",null,"The above shows us that the first argument, f, is 14 bytes in length and fits within the SSO static buffer while the third argument, n, is 23 characters long and there occupies dynamically allocated memory external the the string object."))}u.isMDXComponent=!0}}]);